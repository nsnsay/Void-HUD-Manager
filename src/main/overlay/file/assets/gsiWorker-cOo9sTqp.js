(function(){self.addEventListener(`message`,t=>{let i=t.data;try{if(!i||i.type!==`gsi-data`)return;let t=performance.now(),r=i.payload,a=e(r),o=performance.now(),s={type:`gsi-processed`,payload:a,meta:{receivedAt:t,processedAt:o,latencyMs:o-t}},c=[];n(s.payload,c),self.postMessage(s,c)}catch(e){self.postMessage({type:`gsi-error`,error:r(e)})}});function e(e){let n={receivedAtIso:new Date().toISOString()};try{let r=typeof globalThis.structuredClone==`function`?globalThis.structuredClone(e):JSON.parse(JSON.stringify(e)),i={};return t(r,(e,t)=>{if(Array.isArray(e)&&e.length&&e.every(e=>typeof e==`number`)){let n=e.reduce((e,t)=>e+t,0),r=Math.min(...e),a=Math.max(...e),o=n/e.length;i[t.join(`.`)]={count:e.length,sum:n,min:r,max:a,mean:o}}}),{data:r,stats:i,summary:n}}catch{return{data:e,summary:n}}}function t(e,n,r=[]){if(Array.isArray(e)){n(e,r),e.forEach((e,i)=>t(e,n,r.concat(String(i))));return}e&&typeof e==`object`&&Object.keys(e).forEach(i=>t(e[i],n,r.concat(i)))}function n(e,t){if(e){if(e instanceof ArrayBuffer){t.push(e);return}if(ArrayBuffer.isView(e)){t.push(e.buffer);return}if(Array.isArray(e)){e.forEach(e=>n(e,t));return}if(typeof e==`object`)for(let r in e)n(e[r],t)}}function r(e){return{message:e?.message??String(e),stack:e?.stack}}})();